---
category:
  - ä¹ æƒ¯è¿½è¸ª
status:
  - å·²å®Œæˆ
tags: 
aliases: 
number headings: off
created date: 2025-04-03 02:25
modified date: 2025-05-23 21:01:14
cssclasses:
  - hide-properties
---
## ä¹ æƒ¯è¿½è¸ªæ±‡æ€»è¡¨

```dataviewjs
//ðŸ§  1. é…ç½®è¿½è¸ªä¹ æƒ¯ï¼šå­—æ®µåã€è¡¨å¤´ Emojiã€å¯é€‰åˆ«å
const habits = [
  { field: "æ—©èµ·", icon: "ðŸŒ…" },
  { field: "è¯»ä¹¦", icon: "ðŸ“–" },
  { field: "å†™ä½œ", icon: "âœðŸ¼" },  // æ¯”å¦‚åœ¨æ­¤ä¿®æ”¹å¤„
  { field: "å¥èº«", icon: "ðŸ’ªðŸ¼" },
  { field: "ç¤¾åª’åˆ†äº«", icon: "ðŸ“¢" },
  { field: "å¬æ’­å®¢", icon: "ðŸ‘‚" },
   { field: "å¬æ’­å®¢2", icon: "ðŸ‘‚" },
];

//âœ… 2. èŽ·å–ç›¸å…³é¡µ
const pages = dv.pages('"00Journal/01DailyNotes"')
  .where((p) => habits.some(h => h.field in p))
  .sort(p => p.file.day, "desc")
  .map(p => {
    const note = {
      link: p.file.link,
      day: p.file.day,
    };
    for (const h of habits) {
      note[h.field] = p[h.field];
    }
    return note;
  });

// ðŸ” 3. è¿žç»­æ‰“å¡è®°å½•è®¡ç®—å‡½æ•°
function getRecord(validate) {
  let record = 0;
  let count = 0;
  for (const note of pages) {
    if (validate(note)) {
      count++;
      record = Math.max(record, count);
    } else {
      count = 0;
    }
  }
  return record;
}

const done = "âœ…";
const skip = "ðŸŸ¥";

// ðŸ“† 4. æœ€è¿‘ä¸€å‘¨çš„æ¯æ—¥è®°å½•ï¼ˆè¡¨æ ¼ä¸»ä½“ï¼‰
const fileRows = pages
  .filter(p => p.day >= moment().subtract(1, "w"))
  .sort(p => p.day)
  .map(note => [
    note.link,
    ...habits.map(h => note[h.field] ? done : skip)
  ]);

// ðŸ“ˆ 5. æ¯ä¸ªä¹ æƒ¯çš„ record æ•°æ®
const records = habits.map(h => getRecord(note => note[h.field]));

// ðŸ“‹ 6. æ¸²æŸ“è¡¨æ ¼
dv.table(
  ["[[ä¹ æƒ¯è¿½è¸ª]]", ...habits.map(h => h.icon)],
  [
    ...fileRows,
    ["â€Ž"], // ç©ºè¡Œ
    ["**Record**", ...records],
  ]
);


```

## ä¹ æƒ¯è¿½è¸ª
> [!multi-column]
>
> ```tracker
> searchType: frontmatter
> searchTarget: è¯»ä¹¦, å¬æ’­å®¢
> datasetName: è¯»ä¹¦, å¬æ’­å®¢
> folder: 00Journal/01DailyNotes
> dateFormat: WW_YYYYMMDD
> startDate: 01_20250301
> fixedScale: 0.85
> fitPanelWidth: false
> margin: 0, 0, 0, 0
> month:
> 	startWeekOn: 'Mon'
> ```
> 
> ```tracker
> searchType: frontmatter
> searchTarget: å†™ä½œ, ç¤¾åª’åˆ†äº«
> datasetName: å†™ä½œ, ç¤¾åª’åˆ†äº«
> folder: 00Journal/01DailyNotes
> dateFormat: WW_YYYYMMDD
> startDate: 01_20250301
> fixedScale: 0.85
> fitPanelWidth: false
> margin: 10, 0, 10, 10
> month:
> 	startWeekOn: 'Mon'
> 	color: green
> 	headerMonthColor: steelblue
> 	todayRingColor: steelblue
> 	selectedRingColor: orange
> ```
>

```tracker
searchType: frontmatter
searchTarget: å¥èº«, æ—©èµ·
datasetName: å¥èº«, æ—©èµ·
folder: 00Journal/01DailyNotes
dateFormat: WW_YYYYMMDD
startDate: 10_20250303
fixedScale: 0.85
fitPanelWidth: false
margin: 0, 0, 0, 0
month:
	startWeekOn: 'Mon'
	color: green
	headerMonthColor: steelblue
	todayRingColor: steelblue
	selectedRingColor: orange
```
## å¥åº·è¿½è¸ª
> [!multi-column]
>
> ```tracker
> searchType: frontmatter
> searchTarget: ç¡çœ æ—¶é•¿
> datasetName: ç¡çœ æ—¶é•¿
> folder: 00Journal/01DailyNotes
> dateFormat: WW_YYYYMMDD
> startDate: 01_20250401
> fixedScale: 0.75
> fitPanelWidth: false
> margin: 10, 10, 10, 0
> bar: 
> 	title: ç¡çœ æ—¶é•¿
>     yAxisLabel: æ—¶é•¿
>     yAxisUnit: å°æ—¶
>     yMin: 0
>     showLegend: true
>     barColor: darkolivegreen
> ```
>
> ```tracker
> searchType: frontmatter
> searchTarget: ä½“é‡
> datasetName: ä½“é‡
> folder: 00Journal/01DailyNotes
> dateFormat: WW_YYYYMMDD
> startDate: 01_20250501
> aspectRatio: 1:1
> fixedScale: 0.75
> fitPanelWidth: false
> margin: 10, 0, 10, 10
> line:
>     title: ä½“é‡
>     yAxisLabel: ä½“é‡
>     yAxisUnit: kg
>     showLegend: true
>     legendPosition: bottom
>     lineColor: purple
> ```
>

